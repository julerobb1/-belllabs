<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; frame-src https://discord.com;">
    <title>AT&T Long Lines & Bell Labs - Innovations in Communication</title>
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">
    <link href="img/favicon.ico" rel="shortcut icon">
    <link rel="stylesheet" href="recipes/css/styles.css"> <!-- Main styles -->
    <link rel="alternate" type="application/rss+xml" title="AT&T Long Lines & Bell Labs Updates" href="rss.xml" />
    
    <!--[if lt IE 9]>
    <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/selectivizr@1.0.3/selectivizr.min.js"></script>
    <![endif]-->
    
    <!-- Load compat.js script first -->
    <script src="recipes/js/compat.js"></script>
    <script src="recipes/js/scripts.js" defer></script>
    <script src="recipes/js/discord-widget.js" defer></script>
    <script src="recipes/js/theme-toggle.js" defer></script>
    <link rel="stylesheet" type="text/css" href="recipes/css/ie-fixes.css">
    <style>
        /* Dark mode CSS variables with fallbacks for older browsers */
        :root {
            --bg-color: #ffffff;
            --text-color: #333333;
            --header-bg-color: #0082ca;
            --section-bg-color: #f5f5f5;
            --nav-bg-color: #005a9c;
            --nav-hover-color: #0082ca;
            --link-color: #0056b3;
            --link-hover-color: #003d82;
            --footer-bg-color: #005a9c;
            --footer-text-color: #ffffff;
            --slideshow-text-bg: rgba(0, 0, 0, 0.5);
            --slideshow-text-color: #ffffff;
            --dot-border-color: #bbb;
            --dot-active-color: #717171;
            --form-bg-color: #f8f8f8;
            --form-border-color: #ddd;
            --button-bg-color: #005a9c;
            --button-hover-color: #0082ca;
            --button-text-color: #ffffff;
        }
        
        .dark-mode {
            --bg-color: #191919;
            --text-color: #e0e0e0;
            --header-bg-color: #333333;
            --section-bg-color: #252525;
            --nav-bg-color: #333333;
            --nav-hover-color: #444444;
            --link-color: #6aabff;
            --link-hover-color: #99c9ff;
            --footer-bg-color: #333333; 
            --footer-text-color: #e0e0e0;
            --slideshow-text-bg: rgba(38, 38, 38, 0.7);
            --slideshow-text-color: #e0e0e0;
            --dot-border-color: #444444;
            --dot-active-color: #888888;
            --form-bg-color: #252525;
            --form-border-color: #333333;
            --button-bg-color: #333333;
            --button-hover-color: #444444;
            --button-text-color: #e0e0e0;
        }
        
        /* Basic styling with CSS variables */
        body {
            background-color: #ffffff; /* Fallback for browsers without CSS var support */
            background-color: var(--bg-color);
            color: #333333;
            color: var(--text-color);
            transition: background-color 0.3s ease, color 0.3s ease;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        header {
            background-color: #0082ca;
            background-color: var(--header-bg-color);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        header h1 {
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        header p {
            margin: 0;
        }
        
        .section {
            background-color: var(--section-bg-color);
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        main {
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        footer {
            background-color: var(--footer-bg-color);
            color: var(--footer-text-color);
            padding: 20px;
            text-align: center;
        }
        
        a {
            color: var(--link-color);
            text-decoration: none;
        }
        
        a:hover {
            color: var(--link-hover-color);
            text-decoration: underline;
        }
        
        /* Improved slideshow styling */
        .slideshow-container {
            background-color: var(--bg-color);
            position: relative;
            max-width: 100%;
            margin-bottom: 20px;
        }
        
        .mySlides {
            position: relative;
            display: none;
        }
        
        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            margin-top: -22px;
            padding: 16px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0, 0, 0, 0.3);
            z-index: 10;
        }
        
        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }
        
        .prev {
            left: 0;
        }
        
        .text {
            background-color: var(--slideshow-text-bg);
            color: var(--slideshow-text-color);
            padding: 8px 12px;
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: center;
        }
        
        .numbertext {
            color: #f2f2f2;
            font-size: 12px;
            padding: 8px 12px;
            position: absolute;
            top: 0;
        }
        
        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }
        
        .active, .dot:hover {
            background-color: var(--dot-active-color);
        }
        
        .fade {
            animation-name: fade;
            animation-duration: 1.5s;
        }
        
        @keyframes fade {
            from {opacity: .4}
            to {opacity: 1}
        }
        
        /* Improved image gallery styling */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .image-gallery img {
            width: 100%;
            height: auto;
            border-radius: 8px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .image-gallery img:hover {
            transform: scale(1.03);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* Responsive adjustments for gallery */
        @media (max-width: 1024px) {
            .image-gallery {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .image-gallery img {
                width: calc(50% - 8px);
            }
        }
        
        @media (max-width: 480px) {
            .image-gallery img {
                width: 100%;
            }
        }
        
        .dark-mode .image-gallery img {
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .dark-mode .image-gallery img:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7);
        }
        
        /* Form styling */
        form {
            background-color: var(--form-bg-color);
            border: 1px solid var(--form-border-color);
            padding: 15px;
            border-radius: 5px;
        }
        
        input, button[type="submit"] {
            background-color: var(--bg-color);
            color: var(--text-color);
            border: 1px solid var(--form-border-color);
            padding: 8px;
            margin: 5px 0;
            border-radius: 3px;
        }
        
        button[type="submit"] {
            background-color: var(--button-bg-color);
            color: var(--button-text-color);
            cursor: pointer;
        }
        
        button[type="submit"]:hover {
            background-color: var(--button-hover-color);
        }
        
        /* Navigation styling */
        nav {
            overflow: hidden;
            text-align: center;
            background-color: var(--nav-bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            padding: 10px 0;
        }

        nav a {
            display: inline-block;
            margin: 0 5px;
            text-decoration: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        nav a:hover {
            background-color: var(--nav-hover-color);
            text-decoration: none;
        }

        /* Dropdown menu styling */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: var(--nav-bg-color);
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 5px;
            margin-top: 5px;
        }
        
        .dropdown-content a {
            color: white;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
        }
        
        .dropdown-content a:hover {
            background-color: var(--nav-hover-color);
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
        }
        
        /* Dark mode toggle button */
        #dark-mode-toggle {
            margin-left: 10px;
            padding: 5px 10px;
            border: none;
            background-color: var(--nav-hover-color);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        #dark-mode-toggle:hover {
            background-color: var(--header-bg-color);
        }
        
        /* Fix alignment and spacing issues */
        #discord-widget-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            text-align: center;
        }

        #discord-widget-container button {
            position: absolute;
            top: 5px;
            right: 5px;
            z-index: 1001;
            background-color: #007acc;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 5px;
            cursor: pointer;
        }

        #discord-widget-container button:hover {
            background-color: #0056b3;
        }
        
        /* Add collapsed state for discord widget */
        .collapsible.collapsed iframe {
            display: none;
        }

        /* Alert/Notice styling */
        .alert-banner {
            background-color: #CC0000;
            color: #FFFF33;
            font-weight: bold;
            padding: 10px;
            text-align: center;
            width: 100%;
        }
        
        .alert-banner a {
            color: #FFFF33;
            text-decoration: underline;
        }
        
        .alert-banner a:hover {
            color: #FFFFFF;
        }
        
        /* Dark mode modifications for alert banner */
        .dark-mode .alert-banner {
            background-color: #990000;
            color: #FFFF99;
        }
        
        .dark-mode .alert-banner a {
            color: #FFFF99;
        }
        
        .dark-mode .alert-banner a:hover {
            color: #FFFFFF;
        }
        
        /* Notice box styling */
        .notice-box {
            background-color: #fffde7;
            border-left: 4px solid #ffeb3b;
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 0 4px 4px 0;
        }
        
        .dark-mode .notice-box {
            background-color: #333333;
            border-left: 4px solid #ffeb3b;
            color: #e0e0e0;
        }
        
        /* RSS Button Styling */
        .rss-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px 10px;
            color: white;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        .rss-button svg {
            width: 16px;
            height: 16px;
            fill: white;
        }
        
        .rss-button:hover {
            background-color: var(--nav-hover-color);
        }
        
        /* For screen readers only */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* IE11 fallbacks - for CSS variables not supported in IE11 */
        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
            /* Base styles for IE11 */
            body {
                background-color: #ffffff;
                color: #333333;
            }
            header {
                background-color: #0082ca;
                color: white;
            }
            .section {
                background-color: #f5f5f5;
            }
            nav {
                background-color: #005a9c;
            }
            footer {
                background-color: #005a9c;
                color: #ffffff;
            }
            a {
                color: #0056b3;
            }
            a:hover {
                color: #003d82;
            }
            .dark-mode-enabled {
                display: none;
            }
        }
        
        /* Clearfix for older browsers */
        .clearfix:before,
        .clearfix:after {
            content: " ";
            display: table;
        }
        
        .clearfix:after {
            clear: both;
        }
        
        .clearfix {
            zoom: 1; /* IE6/7 */
        }
        
        /* IE8 and below specific styles */
        @media \0screen {
            body { background-color: #ffffff; color: #333333; }
            header { background-color: #0082ca; }
            nav { background-color: #005a9c; }
            .section { background-color: #f5f5f5; }
            footer { background-color: #005a9c; color: #ffffff; }
        }
    </style>
</head>
<body class="clearfix">
    <!--[if lt IE 9]>
    <div style="border: 1px solid #F7941D; background: #FEEFDA; text-align: center; clear: both; height: auto; position: relative; padding: 0 10px;">
        <div style="padding: 10px; font-size: 14px;">
            <p>You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/" target="_blank">upgrade your browser</a> to improve your experience and security.</p>
            <p>If you cannot upgrade, be aware that some features may not work correctly, but we've done our best to make the site usable.</p>
        </div>
    </div>
    <![endif]-->
    
    <header>
        <h1>AT&T Long Lines & Bell Labs</h1>
        <p>Pioneering Innovations in Telecommunications</p>
    </header>

    <!-- Comment out the alert banner -->
    <!--
    <div class="alert-banner">
        Important Notice: This site is a historical tribute to Bell Labs and AT&T Long Lines. It is not affiliated with AT&T Inc.
    </div>
    -->

    <nav>
        <a href="index.html" rel="noreferrer noopener">Home</a>
        <div class="dropdown">
            <a href="#" rel="noreferrer noopener">Technology</a>
            <div class="dropdown-content">
                <a href="technology.html" rel="noreferrer noopener">Tech Overview</a>
                <a href="transistor.html" rel="noreferrer noopener">The Transistor</a>
                <a href="optical-maser.html" rel="noreferrer noopener">Lasers</a>
                <a href="ccd.html" rel="noreferrer noopener">Digital Imaging</a>
                <a href="photovoltaic-cell.html" rel="noreferrer noopener">Solar Power</a>
                <a href="unix.html" rel="noreferrer noopener">UNIX</a>
                <a href="blit.html" rel="noreferrer noopener">Blit</a>
                <a href="amps.html" rel="noreferrer noopener">AMPS</a>
                <a href="plan9.html" rel="noreferrer noopener">Plan 9</a>
                <a href="unix-emulator.html" rel="noreferrer noopener">UNIX Emulator</a>
            </div>
        </div>
        <a href="bell-labs.html" rel="noreferrer noopener">Bell Labs</a>
        <a href="gallery.html" rel="noreferrer noopener">Gallery</a>
        <a href="bob-lucky.html" rel="noreferrer noopener">Bob Lucky</a>
        <a href="noc.html" rel="noreferrer noopener">Network Operations Center</a>
        <a href="history-att-longlines.html" rel="noreferrer noopener">Long Lines History</a>
        <a href="history-bell-labs.html" rel="noreferrer noopener">Bell Labs History</a>
        <a href="contribute.html" rel="noreferrer noopener">Contribute</a>
        
        <!-- RSS Button -->
        <a href="rss-helper.html" title="Subscribe to RSS Feed" class="rss-button" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <circle cx="6.18" cy="17.82" r="2.18"/>
                <path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"/>
            </svg>
            <span class="sr-only">RSS</span>
        </a>
        
        <button id="dark-mode-toggle">Toggle Dark Mode</button>
    </nav>

    <main>
        <div class="slideshow-container">
            <div class="mySlides fade">
                <div class="numbertext">1 / 2</div>
                <img src="img/map1.jpg" style="width:100%" alt="AT&T Long Lines Network Map">
                <div class="text">The sprawling AT&T Long Lines Network</div>
            </div>

            <div class="mySlides fade">
                <div class="numbertext">2 / 2</div>
                <img src="img/map2.jpg" style="width:100%" alt="Another view of the AT&T Long Lines Network">
                <div class="text">Another look at the Long Lines Network</div>
            </div>

            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>

        <div class="slideshow-navigation">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
        </div>

        <script>
            // Slideshow functionality for mySlides
            let slideIndex = 1;
            showSlides(slideIndex);

            function plusSlides(n) {
                showSlides(slideIndex += n);
            }

            function currentSlide(n) {
                showSlides(slideIndex = n);
            }

            function showSlides(n) {
                let i;
                const slides = document.getElementsByClassName("mySlides");
                const dots = document.getElementsByClassName("dot");
                if (n > slides.length) { slideIndex = 1; }
                if (n < 1) { slideIndex = slides.length; }
                for (i = 0; i < slides.length; i++) {
                    slides[i].style.display = "none";
                }
                for (i = 0; i < dots.length; i++) {
                    dots[i].className = dots[i].className.replace(" active", "");
                }
                if (slides[slideIndex - 1]) {
                    slides[slideIndex - 1].style.display = "block";
                    dots[slideIndex - 1].className += " active";
                }
            }
        </script>

        <section id="history" class="section">
            <h2>History of AT&T Long Lines</h2>
            <p>The AT&T Long Lines was a network of communications lines, initially consisting of telephone lines, that were owned and operated by AT&T. It played a pivotal role in long-distance communication in the United States throughout the 20th century.</p>
            <p>This network not only facilitated telephone calls but also supported television broadcasting, data transmission, and various other forms of communication. Its development marked a significant engineering milestone, involving the construction of numerous repeater stations and the application of cutting-edge technologies.</p>
            <a href="history-att-longlines.html" rel="noreferrer">Learn More about Bell Lab's History Here</a>
        </section>

        <section id="technology" class="section">
            <h2>Technology Behind Long Lines</h2>
            <p>The Long Lines network utilized a range of technologies, including microwave radio relay systems and coaxial cables, enabling the transmission of signals over vast distances with minimal signal degradation.</p>
            <p>Essential components included repeater stations, which amplified signals to maintain their strength, and switching centers, which directed calls to their intended destinations. The network continually evolved, integrating new technologies like fiber optics to enhance capacity and improve overall performance.</p>
            <a href="technology.html" rel="noreferrer">Learn More about the fascinating tech here</a>
        </section>

        <section id="bell-labs" class="section">
            <h2>Bell Labs: The Innovation Hub</h2>
            <p>Bell Labs, formerly known as Bell Telephone Laboratories, was the research and development arm of AT&T. It is renowned for its groundbreaking contributions to science and technology.</p>
            <p>Bell Labs researchers and engineers invented the transistor, the laser, the photovoltaic cell, the charge-coupled device (CCD), information theory, the Unix operating system, and the C programming language, among other things. Eight Nobel Prizes have been awarded for work completed at Bell Laboratories.</p> Learn more about the innovations at Bell Labs <a href="history-bell-labs.html" rel="noreferrer">here</a>.
        </section>

        <section id="gallery" class="section">
            <h2>Gallery</h2>
            <div class="image-gallery" id="dynamic-gallery">
                <!-- Images will be dynamically loaded with JavaScript -->
            </div>
            <p class="gallery-link">Explore more images in our <a href="gallery.html" rel="noreferrer">full gallery</a>.</p>
            
            <!-- User Image Submission Form with notice -->
            <h3>Submit Your Images</h3>
            <div class="notice-box">
                <p><strong>Note:</strong> This image submission form is currently a placeholder and is not functional. In the future, this feature will allow community contributions to our gallery.</p>
            </div>
            <form id="image-upload-form" enctype="multipart/form-data">
                <label for="image-upload">Upload an image:</label>
                <input type="file" id="image-upload" name="image" accept="image/*" required>
                <button type="submit">Submit</button>
            </form>
        </section>

        <!-- Add script for dynamic gallery functionality -->
        <script>
            // Array of available images in the gallery directory
            const galleryImages = [
                { src: "img/gallery/20250304_145346.jpg", alt: "Collapsed microwave relay equipment near a fenced area." },
                { src: "img/gallery/20250304_145429.jpg", alt: "Damaged microwave relay equipment lying on the ground." },
                { src: "img/gallery/20250309_172527.jpg", alt: "Microwave relay tower standing tall under a clear blue sky." },
                { src: "img/gallery/dhtspll_base.jpg", alt: "Base of a microwave relay tower with structural details." },
                { src: "img/gallery/dhtspll_out.jpg", alt: "Microwave relay tower surrounded by a fenced area and greenery." },
                { src: "img/gallery/dhtspll_Reflector_HI.jpg", alt: "Close-up of a microwave reflector dish on the tower." },
                { src: "img/gallery/dhtspll_TB.jpg", alt: "Top section of a microwave relay tower with antennas." },
                { src: "img/gallery/dhtspll_vents1.jpg", alt: "Ventilation system on the side of a building near the tower." },
                { src: "img/gallery/dhtspll1_far.jpg", alt: "Distant view of a microwave relay tower in a grassy field." },
                { src: "img/gallery/dhtspll2.jpg", alt: "Microwave relay tower with a clear view of its structural design." },
                { src: "img/gallery/dhtspll3.jpg", alt: "Detailed view of the microwave relay tower's framework." },
                { src: "img/gallery/dhtspll4.jpg", alt: "Microwave relay tower with a building at its base in a field." }
            ];
            
            // Function to shuffle array (Fisher-Yates algorithm)
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
            
            // Function to populate the dynamic gallery with random images
            function populateDynamicGallery() {
                const dynamicGallery = document.getElementById('dynamic-gallery');
                if (!dynamicGallery) return;
                
                // Clear existing content
                dynamicGallery.innerHTML = '';
                
                // Shuffle the array and take the first 4 images
                const shuffledImages = shuffleArray([...galleryImages]).slice(0, 4);
                
                // Add images to the gallery
                shuffledImages.forEach(image => {
                    const imgElement = document.createElement('img');
                    imgElement.src = image.src;
                    imgElement.alt = image.alt;
                    imgElement.loading = "lazy"; // Add lazy loading for better performance
                    imgElement.title = image.alt; // Add tooltip
                    
                    // Add click handler to open the full gallery
                    imgElement.addEventListener('click', function() {
                        window.location.href = 'gallery.html';
                    });
                    
                    // Set cursor style to indicate clickability
                    imgElement.style.cursor = 'pointer';
                    
                    dynamicGallery.appendChild(imgElement);
                });
            }
            
            // Call the function when the DOM is loaded
            document.addEventListener('DOMContentLoaded', populateDynamicGallery);
        </script>
    </main>

    <footer>
        <p><small>We frequently review our code to ensure we remain a privacy-first, tracker-free site.</small></p>
        <p>&copy; <span id="year"></span> AT&T Long Lines & Bell Labs Community. <small>Site by juler#5461. All rights reserved.</small></p>
    </footer>

    <div id="discord-widget-container" class="collapsible">
        <button id="collapse-button">+</button>
        <iframe src="https://discord.com/widget?id=807000904397094913&theme=dark" width="350" height="500" allowtransparency="true" frameborder="0" referrerpolicy="no-referrer" loading="lazy"></iframe>
    </div>

    <script>
        // Update the year dynamically
        document.getElementById('year').innerHTML = new Date().getFullYear();

        // Function to get dark mode preference from localStorage or cookies
        function getDarkModePreference() {
            try {
                return localStorage.getItem('darkMode');
            } catch (e) {
                // Fallback for browsers without localStorage
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.indexOf('darkMode=') === 0) {
                        return cookie.substring('darkMode='.length, cookie.length);
                    }
                }
                return null;
            }
        }

        // Dark mode toggle functionality with localStorage support and auto-detection
        const toggleButton = document.getElementById('dark-mode-toggle');
        
        function setDarkMode(isDark) {
            if (isDark) {
                // For IE8 that doesn't support classList
                var htmlClasses = document.documentElement.className || '';
                var bodyClasses = document.body.className || '';
                
                if (htmlClasses.indexOf('dark-mode') === -1) {
                    document.documentElement.className = htmlClasses + ' dark-mode';
                }
                
                if (bodyClasses.indexOf('dark-mode') === -1) {
                    document.body.className = bodyClasses + ' dark-mode';
                }
                
                toggleButton.innerHTML = 'Light Mode';
                
                try {
                    localStorage.setItem('darkMode', 'enabled');
                } catch (e) {
                    // Fallback for browsers without localStorage
                    document.cookie = "darkMode=enabled; path=/; max-age=31536000";
                }
            } else {
                // Remove dark-mode class
                document.documentElement.className = (document.documentElement.className || '').replace(/\bdark-mode\b/g, '');
                document.body.className = (document.body.className || '').replace(/\bdark-mode\b/g, '');
                
                toggleButton.innerHTML = 'Dark Mode';
                
                try {
                    localStorage.setItem('darkMode', 'disabled');
                } catch (e) {
                    // Fallback for browsers without localStorage
                    document.cookie = "darkMode=disabled; path=/; max-age=31536000";
                }
            }
        }
        
        toggleButton.addEventListener('click', () => {
            const isDarkMode = document.body.className.indexOf('dark-mode') === -1;
            setDarkMode(isDarkMode);
        });
        
        // Check for saved preference on page load or use system preference
        document.addEventListener('DOMContentLoaded', () => {
            const savedMode = getDarkModePreference();
            
            if (savedMode === 'enabled') {
                // User previously enabled dark mode
                setDarkMode(true);
            } else if (savedMode === 'disabled') {
                // User previously disabled dark mode
                setDarkMode(false);
            } else {
                // No saved preference, check system preference
                const prefersDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                setDarkMode(prefersDarkMode);
                
                // Update when system preference changes
                if (window.matchMedia) {
                    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
                        // Only auto-switch if user hasn't manually set a preference
                        if (!getDarkModePreference()) {
                            setDarkMode(e.matches);
                        }
                    });
                }
            }
        });

        // Collapsible Discord widget functionality
        const discordWidgetContainer = document.getElementById('discord-widget-container');
        const collapseButton = document.getElementById('collapse-button');
        if (collapseButton && discordWidgetContainer) {
            collapseButton.addEventListener('click', () => {
                discordWidgetContainer.classList.toggle('collapsed');
                collapseButton.textContent = discordWidgetContainer.classList.contains('collapsed') ? '+' : '-';
            });
        }

        // IE11 compatibility polyfills
        if (!Array.prototype.forEach) {
            Array.prototype.forEach = function(callback, thisArg) {
                if (this == null) {
                    throw new TypeError('Array.prototype.forEach called on null or undefined');
                }
                var T, k;
                var O = Object(this);
                var len = O.length >>> 0;
                if (typeof callback !== 'function') {
                    throw new TypeError(callback + ' is not a function');
                }
                if (arguments.length > 1) {
                    T = thisArg;
                }
                k = 0;
                while (k < len) {
                    var kValue;
                    if (k in O) {
                        kValue = O[k];
                        callback.call(T, kValue, k, O);
                    }
                    k++;
                }
            };
        }
    </script>
</body>
</html>
