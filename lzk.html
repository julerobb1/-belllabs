<html>
<head>
<style>
html, body {
    height: 99%;
    margin: 0;
    padding: 0;
    background: #000;
}

#cf {
    position:relative;
    margin:0 auto;
    height: 100%;
    width: 100%;
    background: #000;
    overflow: hidden;
}

#cf img {
    position:absolute;
    left:0px;
    top:0px;
    height: 100%;
    width: 100%;
    pointer-events: none;
    opacity: 0;
    -webkit-opacity: 0;
    -moz-opacity: 0;
    -o-opacity: 0;
    will-change: opacity;
    /* Animation will be set dynamically via JS */
    -webkit-animation-name: cfFadeInOut;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;

    -moz-animation-name: cfFadeInOut;
    -moz-animation-timing-function: ease-in-out;
    -moz-animation-iteration-count: infinite;

    -o-animation-name: cfFadeInOut;
    -o-animation-timing-function: ease-in-out;
    -o-animation-iteration-count: infinite;

    animation-name: cfFadeInOut;
    animation-timing-function: ease-in-out;
    animation-iteration-count: infinite;
}

@keyframes cfFadeInOut 
{
    0%   { opacity: 1; }
    12.5%   { opacity: 0; }
    100% { opacity: 0; }
}
@-webkit-keyframes cfFadeInOut 
{
    0%   { opacity: 1; }
    12.5%   { opacity: 0; }
    100% { opacity: 0; }
}
@-moz-keyframes cfFadeInOut 
{
    0%   { opacity: 1; }
    12.5%   { opacity: 0; }
    100% { opacity: 0; }
}
@-o-keyframes cfFadeInOut 
{
    0%   { opacity: 1; }
    12.5%   { opacity: 0; }
    100% { opacity: 0; }
}

/* DO NOT UNTOGGLE BELOW, SEVERE BUGGINESS
WILL OCCUR IF UNCOMMENTED */

/*
#cf img.c1 { animation-delay: 0s; }
#cf img.c2 { animation-delay: 7.5s; }
#cf img.c3 { animation-delay: 15s; }
#cf img.c4 { animation-delay: 22.5s; }
#cf img.c5 { animation-delay: 30s; }
#cf img.c6 { animation-delay: 37.5s; }
#cf img.c7 { animation-delay: 45s; }
#cf img.c8 { animation-delay: 52.5s; }
*/
</style>
</head>
<body>
<div id='cf'></div>
<script>
// Detect folder name dynamically
const baseFolder = 'img/';
const folderName = 'slides'; // Updated folder name
const folderPath = `${baseFolder}${folderName}/`;

// Detect images in the folder
const imageFiles = [
    '29April2025AM_Briefing_page-0001.jpg',
    '29April2025AM_Briefing_page-0002.jpg',
    '29April2025AM_Briefing_page-0003.jpg',
    '29April2025AM_Briefing_page-0004.jpg',
    '29April2025AM_Briefing_page-0005.jpg',
    '29April2025AM_Briefing_page-0006.jpg',
    '29April2025AM_Briefing_page-0007.jpg',
    '29April2025AM_Briefing_page-0008.jpg',
    '29April2025AM_Briefing_page-0009.jpg',
    '29April2025AM_Briefing_page-0010.jpg',
    '29April2025AM_Briefing_page-0011.jpg',
    '29April2025AM_Briefing_page-0012.jpg',
    '29April2025AM_Briefing_page-0013.jpg',
    '29April2025AM_Briefing_page-0014.jpg',
    '29April2025AM_Briefing_page-0015.jpg',
    '29April2025AM_Briefing_page-0016.jpg',
    '29April2025AM_Briefing_page-0017.jpg',
    '29April2025AM_Briefing_page-0018.jpg',
    '29April2025AM_Briefing_page-0019.jpg'
];
const container = document.getElementById('cf');

// Slideshow timing (in seconds)
const totalDuration = 65; // increased total animation duration in seconds for longer display per image
const perImage = totalDuration / imageFiles.length;
const visiblePercent = 100 / imageFiles.length;

// Preload images before starting animation for best OBS/browser compatibility
let loadedCount = 0;
imageFiles.forEach((file, idx) => {
    const img = new Image();
    img.onload = () => {
        loadedCount++;
        if (loadedCount === imageFiles.length) startSlideshow();
    };
    img.onerror = () => {
        loadedCount++;
        if (loadedCount === imageFiles.length) startSlideshow();
    };
    img.src = `${folderPath}${file}`;
});

function startSlideshow() {
    // Dynamically generate CSS for animation delays, keyframes, and animation duration
    let dynamicCSS = '';
    imageFiles.forEach((file, idx) => {
        const delay = idx === imageFiles.length - 1 ? perImage * idx - perImage : perImage * idx;
        dynamicCSS += `#cf img.c${idx+1} { animation-delay: ${delay}s; -webkit-animation-delay: ${delay}s; -moz-animation-delay: ${delay}s; -o-animation-delay: ${delay}s; animation-duration: ${totalDuration}s; -webkit-animation-duration: ${totalDuration}s; -moz-animation-duration: ${totalDuration}s; -o-animation-duration: ${totalDuration}s; }\n`;
    });

    // Use opacity for fade in/out for best compatibility
    dynamicCSS += `\n@keyframes cfFadeInOut {\n`;
    dynamicCSS += `  0% { opacity: 1; }\n`;
    dynamicCSS += `  ${visiblePercent}% { opacity: 0; }\n`;
    dynamicCSS += `  100% { opacity: 0; }\n`;
    dynamicCSS += `}\n`;
    dynamicCSS += `@-webkit-keyframes cfFadeInOut {\n`;
    dynamicCSS += `  0% { opacity: 1; }\n`;
    dynamicCSS += `  ${visiblePercent}% { opacity: 0; }\n`;
    dynamicCSS += `  100% { opacity: 0; }\n`;
    dynamicCSS += `}\n`;
    dynamicCSS += `@-moz-keyframes cfFadeInOut {\n`;
    dynamicCSS += `  0% { opacity: 1; }\n`;
    dynamicCSS += `  ${visiblePercent}% { opacity: 0; }\n`;
    dynamicCSS += `  100% { opacity: 0; }\n`;
    dynamicCSS += `}\n`;
    dynamicCSS += `@-o-keyframes cfFadeInOut {\n`;
    dynamicCSS += `  0% { opacity: 1; }\n`;
    dynamicCSS += `  ${visiblePercent}% { opacity: 0; }\n`;
    dynamicCSS += `  100% { opacity: 0; }\n`;
    dynamicCSS += `}`;

    const style = document.createElement('style');
    style.innerHTML = dynamicCSS;
    document.head.appendChild(style);

    imageFiles.forEach((file, idx) => {
        const img = document.createElement('img');
        img.src = `${folderPath}${file}`;
        img.className = `c${idx + 1}`;
        document.getElementById('cf').appendChild(img);
    });

    console.log(`Using folder: ${folderPath}`);
}

console.log(`Using folder: ${folderPath}`);
</script>
</body>
</html>